<h4><%= t("add_option_types") %></h4>
<table class="index">
  <tr>
    <th><%= t("name") %></th>
    <th><%= t("presentation") %></th>
    <% if @product.has_on_demand_variants? %>
      <th><%= t("price_modifier_type") %> / <%= t("required") %></th>
    <% end %>
    <th></th>
  </tr>
  <% @available_option_types.each do |ot| %>
  <tr>
    <td><%=ot.name %></td>
    <td><%=ot.presentation %></td>

    <% # we use a different form submit strategy depending on has_on_demand_variants?.  revert to old method if false%>
    <% if @product.has_on_demand_variants? %>
      <td>
        <%= form_tag select_admin_product_option_type_url(@product, ot), :method=>'post', :id=>dom_id(ot), :remote=>true do %>
          <%= select_tag :price_modifier_type, options_for_select([['None','none'],['Single','single'],['Multiple','multiple']]) %>
          <%= check_box_tag :is_required %>
        <% end %>
     </td>
     <td class="actions"><%= link_to_function icon('add') + ' ' + t("select"), "$('##{dom_id(ot)}').submit();",:class => 'iconlink' %></td>
   <% else%>
     <td class="actions"><%= link_to icon('add') + ' ' + t("select"),
                            url_for(:controller => "admin/option_types",
                                    :id => ot,
                                    :product_id => @product.permalink,
                                    :action => "select",
                                    :option_type_id =>  ot),
                           :remote => true, :class => 'iconlink' %>
     </td>
   <% end %>

  </tr>
  <% end %>
  <% if @available_option_types.empty? %>
  <tr>
    <td colspan="3"><%= t('none_available') %></td>
  </tr>
  <% end %>
</table>
